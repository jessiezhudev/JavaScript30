This is a very classical Todo App in JavaScript. In this chapter we will focus on _LocalStorage_ and _Event Delegation_.

## Event Delegation
This is often used to frequently added and removed list when we try to add event listener to each element. Since they are not created when we load the page, so event listener is not applied if we attach it to elements. So the solution is to attach it to the parent, and _delegate_ the parent to pass the event to the child elements. 

Wes Bos always like to think of _event delegation_ as very responsible parents, like `ul` and very negligent children `li`. Rather than telling the children to handle the click directly, we're telling the parents to tell them to handle the click. 

This is pictured vividly.

## LocalStorage
What's the difference among `localStroage`, `sessionStorage`, `cookie` is frequently asked in a frontend interview.
I've made a table to show the difference.

| Speciality        | Cookie    |  LocalStorage  |  SessionStorage  |
| --------   | -----:   | :----: | :----: |
| Life Cycle        | Generated by server in general, <br>it can be set expired date. <br>If it is generated by browser, it will expire when browser is closed      |   Unless it is cleared, <br>it will be preserved forever    | It is only valid in current session. <br/>It will be cleared when the current page or brower is closed.
| Data Size        | 4KB      |   5MB    |  same as localStorage
| Communication with server        | It will be carried in the HTTP header. <br>If cookie stores too many data, it will weaken performance      |   It is only stored in client side    | same as localStorage

Now let's start our implementaion about this chapter.
## Effect
Given a restaurant's menu, you type to submit the new dishes to the list. When you click each item of the list, you can toggle between done or undone. And when you refresh the page, the item remains.

## Steps
1. Let's first get the form `add-items` to name it `addItems`, and add a event listener for `submit` event. And try to write something in the `input`, and hit the enter button. We will see that the browser reload by default. Then we add `e.preventDefault()` to the previously defined function `addItem` to stop the default behavior.
2. In the function `addItem`,
    
    - We acquire the `input` value by `this.querySelector`.
    - Define a new obj named `item`, and push it to the array `items`.
    - Add the new item to the page through function `populateList`.
    - Do not forget to call `this.reset()` at the end to clear the `input`.
3. In the function `popluateList`, we `map` the `items` to return `li` elements, and add them to the `platesList`. Now when we submit the item, we can see they are presented in the page.
4. Now it's time to store the items in `localStorage`.

    - We call `localStorage.setItem('items', JSON.stringify(items))` in function `addItem`. Remember to use `JSON.stringify()`, or the data will be stored in browser as `[Object Object]`.
    - We set the default `items` to the data stored in `localStorage` using `JSON.parse`, and do not forget to set `[]` if there is no value in `localStorage`.
    - And we call `populateList` when we first load the page.
    
5. One more thing, to toggle between `done` and `undone`. There we need to use _event delegation_ since the items are frequently added and removed. We attach event listener to `itemsList`, and define a function `toggleDone`.

    - When we `console.log(e.target)`. it returns two objects - `input` and `label`. So we need to judge if it's the input that we are concerned. If not, return.
    - We get the index of the `input` clicked by `dataset.index`. And update its status in items.
    - Finally, we need to update the `localStorage` and `populateList` again.

Well, a long passage. And I've learned a lot. And we can see that it keeps rerendering the page by `populateList`. If the data is too big, the performance will be compromised. That's what the _React_ and _Vue_ have done - to calculate the minimum changes to improve the performance. 
